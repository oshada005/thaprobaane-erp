<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visualizer | Thaprobaane International</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="icon" href="assets/img/logo.png" />
  </head>
  <body class="flex flex-col lg:flex-row min-h-screen">
    <header
      class="lg:hidden flex justify-between items-center px-6 bg-[#0f172a] border-b border-white/5 sticky top-0 z-[60] h-[80px]"
    >
      <div class="flex items-center">
        <img
          src="assets/img/logo.png"
          alt="Logo"
          class="h-20 w-auto object-contain py-1"
        />
      </div>
      <button
        id="mobileMenuBtn"
        class="text-white text-3xl p-2 active:scale-90"
      >
        <i class="fa-solid fa-bars-staggered"></i>
      </button>
    </header>

    <div
      id="sidebarOverlay"
      class="fixed inset-0 bg-black/60 z-40 hidden lg:hidden"
    ></div>

    <aside
      id="sidebar"
      class="sidebar sidebar-closed fixed inset-y-0 left-0 z-50 w-64 lg:relative lg:translate-x-0 lg:flex flex-col h-screen shrink-0"
    >
      <div class="p-6 text-center">
        <img src="assets/img/logo.png" alt="Logo" class="w-full h-auto mb-2" />
        <p
          class="text-[10px] text-blue-400 font-bold tracking-widest uppercase"
        >
          ERP v1.0 <br />
          &copy;Thaprobaane Internation
        </p>
      </div>
      <nav class="flex-1 px-4 space-y-2">
        <a
          href="dashboard.html"
          class="flex items-center p-3 text-blue-500 bg-blue-500/10 rounded-xl font-semibold"
          ><i class="fa-solid fa-house-chimney mr-3"></i> Dashboard</a
        >
        <button
          id="exportBtnSidebar"
          class="w-full flex items-center p-3 text-gray-400 rounded-xl hover:bg-white/5 transition text-left"
        >
          <i class="fa-solid fa-download mr-3"></i> Export Excel
        </button>
        <a
          href="visualizer.html"
          class="flex items-center p-3 text-gray-400 rounded-xl hover:bg-white/5 transition text-left"
          ><i class="fa-solid fa-chair mr-3"></i> Visualizer</a
        >
      </nav>
      <div class="p-4 border-t border-white/5">
        <button
          id="logoutBtn"
          class="w-full bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white py-3 rounded-xl font-bold transition flex items-center justify-center border border-red-500/10"
        >
          <i class="fa-solid fa-power-off mr-2"></i> Logout
        </button>
      </div>
    </aside>

    

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import {
        getDatabase,
        ref,
        set,
        push,
        onValue,
        remove,
        update,
      } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyAgI86HrgB1AidP6Pbm6buMOTFKzNzrREM",
        authDomain: "thaprobaane-erp.firebaseapp.com",
        projectId: "thaprobaane-erp",
        storageBucket: "thaprobaane-erp.firebasestorage.app",
        messagingSenderId: "543906827250",
        appId: "1:543906827250:web:ebaeff4bd03d1323f9f96b",
        databaseURL: "https://thaprobaane-erp-default-rtdb.firebaseio.com",
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);

      // script.js එකට ඕන කරන window variables ටික මෙතන
      window.dbFunctions = { onValue, ref, push, remove, update, db };
      window.dbRef = ref(db, "jobs");

      // Sidebar & UI
      const mobileBtn = document.getElementById("mobileMenuBtn");
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("sidebarOverlay");

      mobileBtn.onclick = () => {
        sidebar.classList.toggle("sidebar-open");
        sidebar.classList.toggle("sidebar-closed");
        overlay.classList.toggle("hidden");
      };
      overlay.onclick = () => {
        sidebar.classList.add("sidebar-closed");
        sidebar.classList.remove("sidebar-open");
        overlay.classList.add("hidden");
      };
      document.getElementById("logoutBtn").onclick = () => {
        window.location.href = "index.html";
      };
    </script>
    <script src="assets/js/script.js"></script>
  </body>
</html>
